<!DOCTYPE html>
<html lang="pt-br">
<head>
    <link href="../css/experimento-queda-livre.css" rel="stylesheet">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Oswald:wght@200..700&family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <title>Experimento Queda Livre</title>
</head>
<body>
   <section class="simulador">
  <h2>Simulador de Queda Livre</h2>
  <div class="controls">
    <label for="gravidade">Gravidade:</label>
    <select id="gravidade">
      <option value="9.8">Terra (9.8 m/s²)</option>
      <option value="1.62">Lua (1.62 m/s²)</option>
      <option value="3.71">Marte (3.71 m/s²)</option>
    </select>
  </div>

  <div class="controls">
    <label for="altura">Altura (m):</label>
    <input type="range" id="altura" min="1" max="100" value="50">
    <span id="altura-valor">50</span>
  </div>

  <button onclick="iniciarQueda()">Iniciar</button>

  <div id="canvas-container">
    <canvas id="simulacao" width="300" height="400"></canvas>
  </div>
</section>

<section class="explicacao">
    <div class="texto">
        <h2>Explicando o que está ocorrendo</h2>
        <p>Conforme alteramos o valor da gravidade, fixando a altura(m) a um valor, percebe-se que o objeto <span>demora cada vez mais para cair</span>, isto se deve ao fato de que a velocidade com que um objeto cai é <span>diretamente proporcional a aceleração da gravidade</span>, porém, quanto mais rápido a queda, maior a desaceleração causada pela <span> Resistência do ar</span></p>
    </div>
</section>

</body>
<script> 
    const canvas = document.getElementById('simulacao');
const ctx = canvas.getContext('2d');

let y = 0;
let alturaInicial = 50;
let gravidade = 9.8;
let tempo = 0;
let animando = false;

document.getElementById('altura').addEventListener('input', (e) => {
  alturaInicial = parseInt(e.target.value);
  document.getElementById('altura-valor').innerText = alturaInicial;
});

document.getElementById('gravidade').addEventListener('change', (e) => {
  gravidade = parseFloat(e.target.value);
});

function iniciarQueda() {
  tempo = 0;
  animando = true;
  y = 0;
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  requestAnimationFrame(queda);
}

function queda(timestamp) {
  if (!animando) return;

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  const alturaPixels = (canvas.height - 50);
  const h = alturaInicial; // em metros
  const t = tempo;
  const g = gravidade;

  // Equação da posição: s = s0 + ½ g t²
  const posicao = 0.5 * g * t * t;

  const yPos = Math.min(posicao * (alturaPixels / h), alturaPixels);

  // Desenhar bolinha
  ctx.beginPath();
  ctx.arc(canvas.width / 2, yPos + 20, 10, 0, Math.PI * 2);
  ctx.fillStyle = '#FF69B4';
  ctx.fill();

  // Parar quando atingir o "chão"
  if (yPos < alturaPixels) {
    tempo += 0.05;
    requestAnimationFrame(queda);
  } else {
    animando = false;
  }
}
</script>
</html>